<!--Shamour Campbell 2408412-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">    
<title>CHECKOUT</title>
<style>
    body {
    font-family: Arial, sans-serif;
    background: #73C8D2;
    margin: 0;
    padding: 20px;
  }

   header {
    text-align: center;
    margin-bottom: 30px;
  }

  /* Shipping Section Styles */
.shipping {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
  }
  /* --- Form Layout --- */
   form {
    display: grid;
    gap: 12px;
    margin-bottom: 50px;
   }

   label {
    font-weight: bold;

  }

   /* --- Input Fields --- */
  input[type="text"]
   {
    width: 100%;
    padding: 8px;
    border-radius: 6px;
    border: 1px solid #ccc;
  }

  /* --- Button Style --- */
  button {
    background-color: #CD2C58;
    color: white;
    padding: 10px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 20px; 
  } 

  button:hover {
    background-color: #0056b3;
  }
  
   /* --- Checkout Confirmation & Invoice Sections --- */
  .checkout, .invoice {
    display: none; /* hidden until form is submitted */
    background-color: #fff;
    border-radius: 10px;
    padding: 20px;
    margin-top: 20px;
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
  }

  .invoice-header img{
    width: 200px;
  }

  /* Table Styling */
table {
    border-collapse: collapse;
    margin-top: 20px;
    width: 80%;
  }
  th, td {
    padding: 10px;
    text-align: center;
  }

  th {
    background-color: #CD2C58;
    color: white;
  }

  td {
    background-color: #f9f9f9;
  }

    /* --- Responsive Styles for Smaller device --- */
  @media (max-width: 600px) {
  body {
    padding: 10px;
  }

  form {
    gap: 8px;
  }

  input, button {
    font-size: 16px;
  }

  button {
    width: 100%;
  }

  table {
    width: 100%;
    font-size: 14px;
  }

  th, td {
    padding: 6px;
  }

  .invoice-header img {
    width: 120px;
  }
}
</style>
</head>

<body>
<header>
  <h1>Checkout Page</h1>
</header>

<!-- SHIPPING DETAILS FORM -->
    <div class="shipping">
    <form id="shipping_details">
        <label>Full Name:</label>
        <input type="text" id="name" required>
        
        <label>Enter Company Name:</label>
        <input type="text" id="company" required>
        
        <label>Enter Address:</label>
        <input type="text" id="address" required>
        
        <label>Enter postal Code</label>
        <input type="text" id="postal_code" required>
        <button type="submit">COMPLETE CHECKOUT</button>
    </form>
</div>


<!-- CHECKOUT CONFIRMATION SECTION -->
<div class="checkout" id="complete_checkout">
    <h2>Checkout Completed</h2>
    <p>Thank you, <strong><span id="display_name"></span></strong></p>
    <p>Your order will be shipped to, <strong><span id="display_company"></span></strong></p>
    <p>Address:<strong><span id="display_address"></span></strong></p>
    <p>Postal Address:<strong><span id="display_postal_code"></span></strong></p>

</div>

<!-- INVOICE SECTION -->
<div class="invoice" id="invoice_section">
    <div class="invoice-header">
      <h2>INVOICE</h2>
      <img src="football pic.png" alt="Logo">
    </div>
<!-- Invoice Date -->
    <p id="date"></p>

     <!-- Invoice Table -->
    <table id="invoice-info" border="1" width="80%">
    <thead>
        <tr>
            <th>Item</th>
            <th>Quantity</th>
            <th>Price</th>
            <th>Total</th>
        </tr>
    </thead>
    <tbody></tbody>
    <tfoot>
        <tr>
            <td colspan="3" class="total">SubTotal:</td>
            <td id="subTotal"></td>
        </tr>
    </tfoot>
</table>


<!-- JAVASCRIPT FUNCTIONALITY -->
<script>
// Get references to key elements
    const form = document.getElementById("shipping_details");
    const confirmation = document.getElementById("complete_checkout");
    const invoiceSection = document.getElementById("invoice_section");

    // Listen for form submission
    form.addEventListener("submit", function(e){
      e.preventDefault();
 // Get form field values
      const name = document.getElementById("name").value;
      const company = document.getElementById("company").value;
      const address = document.getElementById("address").value;
      const postal_code = document.getElementById("postal_code").value;

      // Store the shipping details in localStorage
      const details = {name, company, address, postal_code };
      localStorage.setItem("shippingDetails", JSON.stringify(details));

      // Hide the form and show confirmation/invoice sections
      form.style.display = 'none';
      confirmation.style.display = 'block';
      invoiceSection.style.display = 'block';

    // Display the entered user details in the confirmation section
    document.getElementById("display_name").textContent = name;
    document.getElementById("display_company").textContent = company;
    document.getElementById("display_address").textContent = address;
    document.getElementById("display_postal_code").textContent = postal_code;

    // Generate the invoice with cart details
    generateInvoice();
    
    // Function to build the invoice table from localStorage cart data
    
    function generateInvoice() {
    document.getElementById("date").textContent = new Date().toLocaleDateString();
    
    // Retrieve cart from localStorage
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let tbody = document.querySelector("#invoice-info tbody");
    tbody.innerHTML = ""; // clear previous items
    let subTotal = 0;

        // Loop through cart and add rows to invoice
      cart.forEach(item => {
        let row = document.createElement("tr");
        let itemTotal = item.price * item.quantity;
        subTotal += itemTotal;
        row.innerHTML = `
          <td>${item.name}</td>
          <td>${item.quantity}</td>
          <td>${item.price.toFixed(2)}</td>
          <td>${itemTotal.toFixed(2)}</td>
        `;
        tbody.appendChild(row);
      });
       // Display the subtotal

        document.getElementById("subTotal").textContent = "$" + subTotal.toFixed(2);
    }

    });
        
</script>
</body>
</html>